"use strict";(self.webpackChunkphonebook_frontend=self.webpackChunkphonebook_frontend||[]).push([[299],{3087:function(n,e,t){t.d(e,{Z:function(){return s}});var r="Container_container__VVOCq",a=t(184),s=function(n){var e=n.children;return(0,a.jsx)("div",{className:r,children:e})}},2745:function(n,e,t){t.d(e,{Z:function(){return o}});var r="Form_form__e1yzW",a="Form_button__8NOIT",s=t(184),o=function(n){var e=n.buttonCaption,t=n.onSubmit,o=n.children;return(0,s.jsxs)("form",{className:r,onSubmit:t,children:[o,(0,s.jsx)("button",{className:a,type:"submit",children:e})]})}},9602:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(2791),a=t(5984),s="Input_label__NXpCD",o="Input_input__E5rzA",c=t(184),i=function(n){var e=n.onChange,t=n.type,i=void 0===t?"text":t,l=n.name,u=void 0===l?"":l,d=n.label,m=n.title,h=n.pattern,f=n.required,x=void 0===f||f,v=n.minLength,p=n.value,j=(0,r.useRef)((0,a.x0)());return(0,c.jsxs)(c.Fragment,{children:[d&&(0,c.jsx)("label",{htmlFor:j.current,className:s,children:d}),(0,c.jsx)("input",{id:j.current,className:o,type:i,name:u,value:p,pattern:h,title:m,required:x,onChange:e,minLength:v})]})}},7111:function(n,e,t){t.d(e,{Z:function(){return s}});var r="Section_section__Z2PLw",a=t(184),s=function(n){var e=n.children;return(0,a.jsx)("section",{className:r,children:e})}},6299:function(n,e,t){t.r(e),t.d(e,{default:function(){return J}});var r=t(2791),a=t(9439),s=t(6355),o="ContactItem_contactItem__Z4FuP",c="ContactItem_caption__9hsJU",i="ContactItem_buttonContainer__HxbMT",l="ContactItem_button__IRFBz",u=t(9434),d=t(8115),m=t(9321),h="ModalContent_modalContent__oPvfG",f="CloseButton_closeButton__n+3F+",x=t(1213),v=t(184),p=function(n){var e=n.onClick;return(0,v.jsx)("button",{className:f,onClick:e,children:(0,v.jsx)(x.$iT,{size:24})})},j=function(n){var e=n.onClose,t=n.children,a=(0,r.useRef)(null);return(0,v.jsxs)("div",{ref:a,className:h,children:[(0,v.jsx)(p,{onClick:e}),t]})},_=t(1413),b=t(5861),C=t(7757),N=t.n(C),Z=t(5984),y=function(n){return n.contacts},F=t(4133),g=t(9602),k=t(2745),I=function(n){var e,t,s=n.currentContact,o=n.onCloseModal,c=(0,r.useState)(null!==(e=null===s||void 0===s?void 0:s.name)&&void 0!==e?e:""),i=(0,a.Z)(c,2),l=i[0],m=i[1],h=(0,r.useState)(null!==(t=null===s||void 0===s?void 0:s.number)&&void 0!==t?t:""),f=(0,a.Z)(h,2),x=f[0],p=f[1],j=(0,u.v9)(y).items,C=(0,u.I0)(),I=function(){for(var n={},e=0,t=Object.entries({name:l,number:x});e<t.length;e++){var r=t[e];(null===s||void 0===s?void 0:s[r[0]])!==r[1]&&(n[r[0]]=r[1])}return n},w=function(){var n=(0,b.Z)(N().mark((function n(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),!j.some((function(n){var e=n.name;return e.toLowerCase()===l.toLowerCase()&&e.toLowerCase()!==(null===s||void 0===s?void 0:s.name.toLowerCase())}))){n.next=4;break}return(0,F.N)("".concat(l," is already in contact"),"warning"),n.abrupt("return");case 4:if(t=I(),Object.keys(t).length){n.next=8;break}return(0,F.N)("Update at least one field!","failure"),n.abrupt("return");case 8:return n.next=10,C(s?(0,d.Tk)({contactId:s.contactId,updData:t}):(0,d.uK)((0,_.Z)({id:(0,Z.x0)()},t)));case 10:if(!(r=n.sent).error){n.next=14;break}return(0,F.N)(r.payload.message,"failure",5e3),n.abrupt("return");case 14:A(),o();case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),L=function(n){var e=n.target,t=e.name,r=e.value;switch(t){case"name":m(r);break;case"number":p(r);break;default:return}},A=function(){m(""),p("")};return(0,v.jsxs)(k.Z,{buttonCaption:"".concat(s?"Update":"Add"," contact"),onSubmit:w,children:[(0,v.jsx)(g.Z,{label:"Name",type:"text",name:"name",pattern:"^[A-Za-z\\u0080-\\uFFFF\\- ']+$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",onChange:L,value:l}),(0,v.jsx)(g.Z,{label:"Number",type:"tel",name:"number",pattern:"^(\\+?[0-9.\\(\\)\\-\\s]*)$",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",onChange:L,value:x})]})},w=function(n){var e=n.name,t=n.number,h=n.contactId,f=(0,r.useState)(!1),x=(0,a.Z)(f,2),p=x[0],_=x[1],b=(0,u.I0)(),C=function(){return _((function(n){return!n}))};return(0,v.jsxs)("li",{className:o,children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{className:c,children:["Name: ",e]}),(0,v.jsxs)("p",{className:c,children:["Number: ",t]})]}),(0,v.jsxs)("div",{className:i,children:[(0,v.jsx)("button",{type:"button",className:l,onClick:C,children:(0,v.jsx)(s.tU3,{})}),(0,v.jsx)("button",{type:"button",className:l,onClick:function(){return b((0,d.GK)(h))},children:(0,v.jsx)(s.Xm5,{})})]}),p&&(0,v.jsx)(m.Z,{onClose:C,children:(0,v.jsx)(j,{onClose:C,children:(0,v.jsx)(I,{onCloseModal:C,currentContact:{name:e,number:t,contactId:h}})})})]})},L="ContactList_contactList__UFVCg",A=function(n){return n.filter},z=function(){var n=(0,u.v9)(y).items,e=(0,u.v9)(A);return(0,v.jsx)("ul",{className:L,children:n.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())})).map((function(n){var e=n.id,t=n.name,r=n.number;return(0,v.jsx)(w,{name:t,number:r,contactId:e},e)}))})},B="ControlPanel_controlPanelBox__HVdks",M="AddButton_addButton__err1-",S=t(6856),P=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],s=e[1],o=function(){return s((function(n){return!n}))};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{className:M,onClick:o,children:(0,v.jsx)(S.$3V,{size:40})}),t&&(0,v.jsx)(m.Z,{onClose:o,children:(0,v.jsx)(j,{onClose:o,children:(0,v.jsx)(I,{onCloseModal:o})})})]})},U=function(){return(0,v.jsx)("div",{className:B,children:(0,v.jsx)(P,{})})},T="Filter_filterBox__A-UPt",V=t(3797),$=function(){var n=(0,u.v9)(A),e=(0,u.I0)();return(0,v.jsx)("div",{className:T,children:(0,v.jsx)(g.Z,{label:"Find contacts by name",type:"text",name:"filter",pattern:"^[A-Za-z\\u0080-\\uFFFF\\- ']+$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",onChange:function(n){var t=n.target.value;return e((0,V.M)(t))},value:n})})},q=t(7111),O=t(3087),D="App_info__qU+g4",J=function(){var n=(0,u.I0)(),e=(0,u.v9)(y),t=e.items,a=e.isLoading,s=e.error;return(0,r.useEffect)((function(){n((0,d.yF)())}),[n]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h1",{className:"visually-hidden",children:"Contacts"}),(0,v.jsx)(q.Z,{children:(0,v.jsxs)(O.Z,{children:[(0,v.jsx)("h2",{className:"visually-hidden",children:"Control panel"}),(0,v.jsx)(U,{})]})}),(0,v.jsx)(q.Z,{children:(0,v.jsxs)(O.Z,{children:[(0,v.jsx)("h2",{className:"visually-hidden",children:"Filter"}),(0,v.jsx)($,{})]})}),(0,v.jsx)(q.Z,{children:(0,v.jsxs)(O.Z,{children:[(0,v.jsx)("h2",{className:"visually-hidden",children:"Contact list"}),s||a||t.length?(0,v.jsx)(z,{}):(0,v.jsx)("p",{className:D,children:"The contact list is empty!"})]})})]})}}}]);
//# sourceMappingURL=299.58065a00.chunk.js.map